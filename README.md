# System_analyst
This is a test task for the company

1. Найденные логические противоречия и недочеты в ТЗ

В представленном фрагменте Технического задания (ТЗ) выявлен ряд критических противоречий и неполных мест, которые могут привести к неправильной реализации, ошибкам в логике и неудовлетворительному пользовательскому опыту.

Критические логические противоречия:

    Пункт 2 vs Пункт 9: Механизм удаления товара. В пункте 2 четко указано, что уменьшить количество товара можно лишь до 1 единицы, а для полного удаления позиции предусмотрена отдельная кнопка. Однако пункт 9 описывает сценарий, где уменьшение количества до 0 автоматически удаляет товар. Эти требования взаимоисключающие. Реализация обоих приведет к путанице в интерфейсе и непредсказуемому поведению системы для пользователя.

    Пункт 7 vs Пункт 13: Стратегия работы с ценой. Пункт 7 декларирует принцип фиксации цены на момент добавления товара в корзину, что является стандартной и ожидаемой пользователем практикой, защищающей его от скачков цен в процессе формирования заказа. Пункт 13 требует автоматического обновления цены в корзине при ее изменении в каталоге, что делает поведение системы непредсказуемым для покупателя и аннулирует принцип из пункта 7. Необходимо выбрать одну бизнес-логику.

    Пункт 1 vs Пункт 4: Конфликт локальных и глобальных ограничений. Пункт 1 позволяет добавить до 10 единиц одного товара. Пункт 4 устанавливает общий лимит корзины в 20 штук всех товаров. Возникает конфликт: пользователь может иметь 3 товара по 7 штук (итого 21), что нарушает общий лимит, хотя для каждого товара в отдельности лимит не превышен. В ТЗ не описано, как система должна обрабатывать эту ситуацию: что проверять в первую очередь и какое сообщение показывать.

Недочеты, неполнота и посторонние требования:

    Пункт 3: Неоднозначность термина. Фраза "различных товаров" может трактоваться по-разному. Являются ли различными товарами одна и та же модель футболки в разных размерах или цветах? Для корректной реализации требуется четкое определение уникальности товарной позиции (например, по уникальному ID и комбинации атрибутов).

    Пункт 6: Неинформативное сообщение об ошибке. Сообщение "Лимит корзины превышен" не помогает пользователю понять, что именно он сделал не так и как это исправить. Превышен лимит на количество одного товара (10), на число разных позиций (5) или на общее количество единиц (20)? Сообщения об ошибках должны быть конкретными и направлять к решению.

    Пункты 10 и 11: Требования не к тому модулю. Требования по показу рекламы ("может быть реклама", "должна быть каждый будний день...") не относятся к базовому функционалу корзины. Это требования к системе промо-блоков, главной странице или маркетинговой CMS. Их включение в ТЗ по корзине размывает фокус. Логика "по утрам и вечерам" также требует множества уточнений (часовой пояс, точное время).

    Отсутствие ключевых сценариев. Не описан сценарий повторного добавления товара, который уже есть в корзине. Должно ли его количество увеличиваться? Должна ли система предлагать перейти в корзину? Это фундаментальное поведение, которое необходимо специфицировать.

    Технические и нефункциональные пробелы. В ТЗ ничего не сказано о сохранении состояния корзины (для гостей и зарегистрированных пользователей), о поведении с недоступными или удаленными из каталога товарами, о производительности операций с корзиной.

2. Исправленная и непротиворечивая версия фрагмента ТЗ

Раздел ТЗ: Функционал корзины интернет-магазина "Петрушка Зеленая"

1. Основные принципы
1.1. Корзина предназначена для временного хранения товаров, отобранных пользователем для последующего оформления заказа.
1.2. Цена товара фиксируется на момент его первого добавления в корзину данным пользователем и остается неизменной до момента оформления заказа или удаления товара.

2. Добавление и обновление товаров
2.1. Пользователь может добавить в корзину любой товар из общедоступного каталога.
2.2. При повторном добавлении товара с идентичным ID и набором атрибутов (размер, цвет и т.д.) его количество в существующей позиции увеличивается на добавляемое количество.
2.3. Система должна предотвращать добавление, которое нарушает установленные лимиты (см. раздел 3).

3. Ограничения (Business Rules)
3.1. Максимальное количество единиц одной товарной позиции (определяемой уникальным ID и атрибутами) — 10.
3.2. Максимальное количество разных товарных позиций в корзине — 5.
3.3. Максимальное общее количество всех товарных единиц в корзине — 20.
3.4. Проверка лимитов осуществляется в момент любого действия по изменению состава корзины (добавление, изменение количества). Приоритет проверки: лимит разных позиций (3.2), затем общий лимит (3.3), затем лимит на позицию (3.1).

4. Управление содержимым корзины (UI/UX)
4.1. На странице корзины для каждой позиции отображаются: изображение, название, атрибуты, зафиксированная цена за единицу, поле ввода количества, общая стоимость позиции и кнопка "Удалить".
4.2. Пользователь может изменять количество товара через поле ввода. Допустимый диапазон значений: от 1 до 10.
4.3. Для полного удаления товарной позиции из корзины используется только кнопка "Удалить". Уменьшение количества до 0 через поле ввода технически невозможно.

5. Обработка исключительных ситуаций
5.1. При попытке действия, нарушающего лимиты раздела 3, операция не выполняется, и пользователю показывается соответствующее контекстное сообщение:
- При нарушении лимита 3.2: "В корзине может быть не более 5 разных товаров. Удалите один из существующих, чтобы добавить новый."
- При нарушении лимита 3.3: "Общее количество товаров не может превышать 20 шт. Уменьшите количество других товаров."
- При нарушении лимита 3.1: "Нельзя заказать более 10 единиц одного товара."
5.2. Если товар был удален из каталога или стал недоступен, его позиция в корзине сохраняется с четкой пометкой "Нет в наличии" и исключается из расчета общей суммы. Заказ с такой позицией оформить невозможно.

6. Данные и хранение
6.1. Для авторизованных пользователей содержимое корзины должно сохраняться на сервере и быть доступным с любого устройства.
6.2. Для неавторизованных (гостевых) пользователей содержимое корзины должно сохраняться в localStorage браузера на срок не менее 7 дней.
